SELECT DISTINCT DDM.DOC_NAME, DDM.DOC_ID, DDM.DOC_CODE, 
DEPARTMENT_SLV.DEPTS_NAME, DEPARTMENT_DTL.DEPTD_NAME, DEPARTMENT_MST.DEPTM_NAME, 
DESIGNATION_INFO.DESIG_NAME, TO_CHAR(DDM.DOC_EFF_DATE,'dd-MON-yy') DOC_EFF_DATE, DDM.DOC_STATUS, DEPARTMENT_DTL.DEPTD_ID, 
NVL(DDM.DOC_DEPTD_HEAD_FLAG,0) DOC_DEPTD_HEAD_FLAG, NVL(DDM.DOC_MANAGER_FLAG,0) DOC_MANAGER_FLAG,
DEPARTMENT_SLV.DEPTS_ID, DESIGNATION_INFO.DESIG_ID, 
TO_CHAR(DDM.DOC_APP_LOGIN_EXP_DATE,'DD-MON-RR') EXP_DATE, DDM.DOC_APP_FIRST_LOGIN_FLAG,DDM.DOC_VIDEO_LINK,DDM.DOC_VIDEO_LINK_ENABLE_FLAG,
NVL(DDM.DOC_FORCED_LOG_OUT_FLAG,0) FL_FLAG, (SELECT LIC_CENTER_NAME FROM ISP_RUNAUTO) DOC_CENTER_NAME,
(CASE WHEN NVL(UPPER(DOC_STATUS), 'NEW') = 'QUIT' AND DOC_EFF_DATE <= SYSDATE THEN 0
         WHEN NVL(UPPER(DOC_STATUS), 'NEW') = 'QUIT' AND DOC_EFF_DATE > SYSDATE THEN 1
         WHEN NVL(UPPER(DOC_STATUS), 'NEW') <> 'QUIT' AND DOC_EFF_DATE <= SYSDATE THEN 1
         WHEN NVL(UPPER(DOC_STATUS), 'NEW') <> 'QUIT' AND DOC_EFF_DATE > SYSDATE THEN 0
         WHEN NVL(UPPER(DOC_STATUS), 'NEW') = 'TRANSFER' AND DOC_EFF_DATE > SYSDATE THEN 1
         WHEN NVL(UPPER(DOC_STATUS), 'NEW') = 'TRANSFER' AND DOC_EFF_DATE <= SYSDATE THEN 0
 ELSE 1 END) user_avail, 0 pat_app_history, 0 upcoming_pat_history, 1 pat_pres_view, 1 all_presc
FROM DOCTOR_INFO DDM, DEPARTMENT_SLV, DEPARTMENT_DTL, DEPARTMENT_MST, DESIGNATION_INFO
                          
WHERE DDM.DOC_ONLINE_FLAG = 1
 AND (DEPARTMENT_SLV.DEPTS_ID = DDM.DOC_DEPTS_ID)
 AND (DEPARTMENT_SLV.DEPTS_DEPTD_ID = DEPARTMENT_DTL.DEPTD_ID)
 AND (DEPARTMENT_DTL.DEPTD_DEPTM_ID = DEPARTMENT_MST.DEPTM_ID)
 AND (DESIGNATION_INFO.DESIG_ID(+) = DDM.DOC_DESIG_ID)
