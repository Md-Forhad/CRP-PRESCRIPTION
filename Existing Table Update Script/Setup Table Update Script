--Chief complaint
ALTER TABLE COMPLAIN_MST ADD (
  CM_IS_ACTIVE      NUMBER(2) DEFAULT 1,
  CM_DOC_ID         NUMBER(20),
  CM_ENTRY_BY       VARCHAR2(30),
  CM_ENTRY_TIME     DATE DEFAULT SYSDATE,
  CM_UPDATE_BY      VARCHAR2(30),
  CM_UPDATE_TIME    DATE
);

--Cause of injury
ALTER TABLE INJURY_MST ADD (
  INJURY_IS_ACTIVE      NUMBER(2) DEFAULT 1,
  INJURY_DOC_ID         NUMBER(20),
  INJURY_ENTRY_BY       VARCHAR2(30),
  INJURY_ENTRY_TIME     DATE DEFAULT SYSDATE,
  INJURY_UPDATE_BY      VARCHAR2(30),
  INJURY_UPDATE_TIME    DATE
);

--Diagnosis
ALTER TABLE DIAGNOSIS_MST ADD (
  DM_IS_ACTIVE      NUMBER(2) DEFAULT 1,
  DM_DOC_ID         NUMBER(20),
  DM_ENTRY_BY       VARCHAR2(30),
  DM_ENTRY_TIME     DATE DEFAULT SYSDATE,
  DM_UPDATE_BY      VARCHAR2(30),
  DM_UPDATE_TIME    DATE
);

--Medical history
ALTER TABLE MEDICAL_HISTORY_MST ADD (
  MHM_IS_ACTIVE     NUMBER(2) DEFAULT 1,
  MHM_DOC_ID        NUMBER(20),
  MHM_ENTRY_BY      VARCHAR2(30),
  MHM_ENTRY_TIME    DATE DEFAULT SYSDATE,
  MHM_UPDATE_BY     VARCHAR2(30),
  MHM_UPDATE_TIME   DATE
);

--Clinical findings
ALTER TABLE CLINICAL_FINDINGS_MST ADD (
  CFM_IS_ACTIVE     NUMBER(2) DEFAULT 1,
  CFM_DOC_ID        NUMBER(20),
  CFM_ENTRY_BY      VARCHAR2(30),
  CFM_ENTRY_TIME    DATE DEFAULT SYSDATE,
  CFM_UPDATE_BY     VARCHAR2(30),
  CFM_UPDATE_TIME   DATE
);

--Medication
ALTER TABLE MEDICATION_MST ADD (
  MEDICATION_IS_ACTIVE      NUMBER(2) DEFAULT 1,
  MEDICATION_DOC_ID         NUMBER(20),
  MEDICATION_ENTRY_BY       VARCHAR2(30),
  MEDICATION_ENTRY_TIME     DATE DEFAULT SYSDATE,
  MEDICATION_UPDATE_BY      VARCHAR2(30),
  MEDICATION_UPDATE_TIME    DATE
);

--Test/investigation/service/device
ALTER TABLE PAYMENT_FEE_NAME ADD (
  PFN_DOC_ID        NUMBER(20)
);

--General, Past Medical History, Family History
ALTER TABLE PRES_QUESTION_BANK_MST DROP PRIMARY KEY CASCADE;

DROP TABLE PRES_QUESTION_BANK_MST CASCADE CONSTRAINTS;

CREATE TABLE PRES_QUESTION_BANK_MST (
  PQBM_ID           NUMBER(20)                      NOT NULL,
  PQBM_NAME         VARCHAR2(200),
  PQBM_DETAILS      VARCHAR2(300),
  PQBM_IS_ACTIVE    NUMBER(2) DEFAULT 1,
  PQBM_DOC_ID       NUMBER(20),
  PQBM_ENTRY_BY     VARCHAR2(30),
  PQBM_ENTRY_TIME   DATE DEFAULT SYSDATE,
  PQBM_UPDATE_BY    VARCHAR2(30),
  PQBM_UPDATE_TIME  DATE
);

CREATE UNIQUE INDEX PRES_QUESTION_BANK_MST_PK ON PRES_QUESTION_BANK_MST (PQBM_ID);

CREATE UNIQUE INDEX PRES_QUESTION_BANK_MST_UK1 ON PRES_QUESTION_BANK_MST (PQBM_NAME);

ALTER TABLE PRES_QUESTION_BANK_MST ADD (
  CONSTRAINT PRES_QUESTION_BANK_MST_PK PRIMARY KEY (PQBM_ID)
  USING INDEX PRES_QUESTION_BANK_MST_PK ENABLE VALIDATE,
  CONSTRAINT PRES_QUESTION_BANK_MST_UK1 UNIQUE (PQBM_NAME)
  USING INDEX PRES_QUESTION_BANK_MST_UK1 ENABLE VALIDATE);


ALTER TABLE PRES_QUESTION_BANK_DTL DROP PRIMARY KEY CASCADE;

DROP TABLE PRES_QUESTION_BANK_DTL CASCADE CONSTRAINTS;

CREATE TABLE PRES_QUESTION_BANK_DTL (
  PQBD_ID               NUMBER(20)             NOT NULL,
  PQBD_PQBM_ID          NUMBER(20),
  PQBD_QUESTION_NAME    VARCHAR2(250),
  PQBD_QUESTION_DETAILS VARCHAR2(300),
  PQBD_IS_ACTIVE        NUMBER(2) DEFAULT 1,
  PQBD_DOC_ID           NUMBER(20),
  PQBD_ENTRY_BY         VARCHAR2(30),
  PQBD_ENTRY_TIME       DATE DEFAULT SYSDATE,
  PQBD_UPDATE_BY        VARCHAR2(30),
  PQBD_UPDATE_TIME      DATE
);

CREATE UNIQUE INDEX PRES_QUESTION_BANK_DTL_PK ON PRES_QUESTION_BANK_DTL (PQBD_ID);

CREATE UNIQUE INDEX PRES_QUESTION_BANK_DTL_UK1 ON PRES_QUESTION_BANK_DTL (PQBD_PQBM_ID, PQBD_QUESTION_NAME);

ALTER TABLE PRES_QUESTION_BANK_DTL ADD (
  CONSTRAINT PRES_QUESTION_BANK_DTL_PK PRIMARY KEY (PQBD_ID)
  USING INDEX PRES_QUESTION_BANK_DTL_PK ENABLE VALIDATE,
  CONSTRAINT PRES_QUESTION_BANK_DTL_UK1 UNIQUE (PQBD_PQBM_ID, PQBD_QUESTION_NAME)
  USING INDEX PRES_QUESTION_BANK_DTL_UK1 ENABLE VALIDATE);

ALTER TABLE PRES_QUESTION_BANK_DTL ADD (
  CONSTRAINT PRES_QUESTION_BANK_DTL_FK1 FOREIGN KEY (PQBD_PQBM_ID) 
  REFERENCES PRES_QUESTION_BANK_MST (PQBM_ID) ENABLE VALIDATE);
